<app-sidenav></app-sidenav>

<div class="mainContent">

  <h1 style="padding: 15px 32px; height: 8vh;"> Subjects </h1>
  <div class="lowerMainContent">

    <div class="mx-5 py-3">

      <div class="d-flex justify-content-start" style="margin: 10px 0;">
        <button (click)="goBack()" type="button" class="btn p-0">
          <img class="logoImg " src="./assets/images/icon_back_btn.png" alt="BACK BUTTON">
          <strong class="go_back"> GO BACK </strong>
        </button>
      </div>


      <div class="addForm p-5">

        <h2>Edit Subject</h2>
        <form [formGroup]="editSubForm" (ngSubmit)="editSubject(editSubForm)" enctype="multipart/form-data">

          <div class="form-group pb-3">
            <label for="course_code">Course Code</label>
            <input type="text" formControlName="course_code" id="course_code" class="form-control"
              [class.invalid]="editSubForm.get('course_code')?.hasError('required') && (editSubForm.get('course_code')?.dirty || editSubForm.get('course_code')?.touched || isFormSubmitted)">
            <div class="error"
              *ngIf="editSubForm.get('course_code')?.hasError('required') && (editSubForm.get('course_code')?.dirty || editSubForm.get('course_code')?.touched || isFormSubmitted)">
              This field is required.
            </div>
          </div>

          <div class="form-group pb-3">
            <label for="title">Title</label>
            <input type="text" formControlName="title" id="title" class="form-control"
              [class.invalid]="editSubForm.get('title')?.hasError('required') && (editSubForm.get('title')?.dirty || editSubForm.get('title')?.touched || isFormSubmitted)">
            <div class="error"
              *ngIf="editSubForm.get('title')?.hasError('required') && (editSubForm.get('title')?.dirty || editSubForm.get('title')?.touched || isFormSubmitted)">
              This field is required.
            </div>
          </div>

          <div class="form-group pb-3">
            <label for="subjType">Subject Type &nbsp;&nbsp;&nbsp;</label>
            <select formControlName="subjType" id="subjType" style="padding: 5px;"
              [class.invalid]="editSubForm.get('subjType')?.hasError('required') && (editSubForm.get('subjType')?.dirty || editSubForm.get('subjType')?.touched || isFormSubmitted)">
              <option value="GE">General Education</option>
              <option value="CC">Common Course</option>
              <option value="ProfC">Professional Course</option>
              <option value="ProfE">Professional Electives</option>
              <option value="PE">Physical Education</option>
              <option value="NSTP">National Training Service Program</option>
            </select>
          </div>

          <div class="form-group pb-3">
            <label for="description">Description:</label>
            <textarea formControlName="description" class="form-control" id="" cols="70" rows="3"
              [class.invalid]="editSubForm.get('description')?.hasError('required') && (editSubForm.get('description')?.dirty || editSubForm.get('description')?.touched || isFormSubmitted)"></textarea>
            <div class="error"
              *ngIf="editSubForm.get('description')?.hasError('required') && (editSubForm.get('description')?.dirty || editSubForm.get('description')?.touched || isFormSubmitted)">
              This field is required.
            </div>
          </div>

          <!-- [class.error]="editSubForm.get('syllabus')?.hasError('required') && (isFormSubmitted)" -->

          <div class="form-group pb-3">
            <label for="syllabus" style="margin-bottom: 5px;">Upload New Syllabus File:</label> <br>
            <input type="File" formControlName="syllabus" name="syllabus" accept=".pdf" (change)="onFileSelect($event)"
              class="form-control">
          </div>

          <div class="d-flex justify-content-end" style="margin: 5px 0;">
            <button class="btn btn-primary px-4"> <strong> Confirm Changes </strong> </button>
          </div>

          <div class="success"
            *ngIf="isSuccess && !editSubForm.get('syllabus')?.hasError('required') && !editSubForm.get('title')?.hasError('required') && !editSubForm.get('syllabus')?.hasError('required')">
            Subject information successfully changed.
          </div>
        </form>
      </div>
    </div>
  </div>
</div>